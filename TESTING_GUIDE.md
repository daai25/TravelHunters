# TravelHunters ML-System - Testanleitung

## üéØ Ziel
Diese Anleitung zeigt dir, wie du das gesamte TravelHunters ML-Empfehlungssystem testen kannst, um sicherzustellen, dass alle Komponenten ordnungsgem√§√ü funktionieren.

## üöÄ Schnelltest (Empfohlen)

### Schritt 1: Automatisierter Kompletttest
```bash
# 1. Navigiere zum modelling Verzeichnis
cd /pfad/zu/TravelHunters/modelling

# 2. F√ºhre den automatisierten Test aus
python test_complete_system.py
```

**Was wird getestet:**
- ‚úÖ Datenladen aus SQLite-Datenbank (8.000+ Hotels)
- ‚úÖ Feature Engineering (30+ ML-Features)
- ‚úÖ Parameter-basiertes Modell (Linear Regression)
- ‚úÖ Text-basiertes Modell (TF-IDF + Cosine Similarity) 
- ‚úÖ Hybrid-Modell (Kombination beider Ans√§tze)
- ‚úÖ Evaluation-Framework (RMSE, R¬≤, Accuracy)
- ‚úÖ Interaktive Demo-Schnittstelle

**Erwarteter erfolgreicher Output:**
```text
============================================================
üîç TravelHunters ML System - Complete Test Suite
============================================================

‚úÖ PASS Data Loading
‚úÖ PASS Feature Engineering  
‚úÖ PASS Parameter Model
‚úÖ PASS Text Model
‚úÖ PASS Hybrid Model
‚úÖ PASS Evaluation Framework
‚úÖ PASS Demo Interface

üìä Overall Results: 7/7 tests passed (100.0%)
üéâ All tests passed! System is ready for production.
```

### Schritt 2: Interaktive Demo starten
```bash
# Starte die Haupt-Anwendung
python demo.py
```

**Demo-Funktionen:**
1. **Daten-√úbersicht** ‚Üí Zeigt Statistiken der Hotel-Datenbank
2. **Hotel-Empfehlungen** ‚Üí Teste alle drei Empfehlungsmodelle
3. **Modell-Evaluation** ‚Üí Performance-Metriken anzeigen
4. **Beenden**

---

## üîß Einzelkomponenten testen

### Test 1: Datenbankladen
```bash
python -c "
from data_preparation.load_data import HotelDataLoader
loader = HotelDataLoader()
hotels = loader.load_hotels()
print(f'‚úÖ {len(hotels)} Hotels geladen')
print(f'üìä Beispiel: {hotels.iloc[0][\"name\"]}')
print(f'üí∞ Preisbereich: ‚Ç¨{hotels[\"price\"].min():.0f} - ‚Ç¨{hotels[\"price\"].max():.0f}')
print(f'‚≠ê Bewertungen: {hotels[\"rating\"].min():.1f} - {hotels[\"rating\"].max():.1f}')
"
```

**Erwarteter Output:**
```text
‚úÖ Loading hotel data from SQLite database...
‚úÖ Loaded 8072 hotels from database
‚úÖ 8072 Hotels geladen
üìä Beispiel: Renovated 2BD apartment in Parc Belleville  
üí∞ Preisbereich: ‚Ç¨35 - ‚Ç¨7493
‚≠ê Bewertungen: 2.0 - 10.0 (10-Punkte-Skala)
```

### Test 2: Feature Engineering
```bash
python -c "
from data_preparation.load_data import HotelDataLoader
from data_preparation.feature_engineering import HotelFeatureEngineer

loader = HotelDataLoader()
hotels = loader.load_hotels()

engineer = HotelFeatureEngineer()
features = engineer.engineer_numerical_features(hotels)

print(f'‚úÖ {features.shape[1]} Features f√ºr {features.shape[0]} Hotels erstellt')
print(f'üìä Feature-Spalten: {list(features.columns)[:10]}...')

# Test Amenities-Extraktion
sample_desc = hotels.iloc[0]['description']
amenities = engineer.extract_amenities_from_description(sample_desc)
print(f'üè® Extrahierte Amenities: {amenities}')
"
```

### Test 3: Parameter-basiertes Modell
```bash
python -c "
from data_preparation.load_data import HotelDataLoader
from data_preparation.feature_engineering import HotelFeatureEngineer
from models.parameter_model import ParameterBasedRecommender

# Daten laden und Features erstellen
loader = HotelDataLoader()
hotels = loader.load_hotels()
engineer = HotelFeatureEngineer()
features = engineer.engineer_numerical_features(hotels)

# Modell trainieren
model = ParameterBasedRecommender()
metrics = model.train(features, hotels['rating'])
print(f'‚úÖ Modell trainiert - R¬≤: {metrics[\"val_r2\"]:.3f}, RMSE: {metrics[\"val_rmse\"]:.3f}')

# Empfehlungen testen
user_prefs = {
    'max_price': 300,
    'min_rating': 6.0,  # 6.0/10 entspricht "gut"
    'required_amenities': ['wifi', 'breakfast']
}

recommendations = model.recommend_hotels(hotels, user_prefs)
print(f'‚úÖ {len(recommendations)} Empfehlungen f√ºr Budget ‚Ç¨300, Rating ‚â•6.0/10')

if len(recommendations) > 0:
    top = recommendations.iloc[0]
    print(f'üèÜ Top-Empfehlung: {top[\"name\"]} (‚Ç¨{top[\"price\"]}/Nacht, {top[\"rating\"]}/10‚≠ê)')
"
```

### Test 4: Text-basiertes Modell mit Preisfiltern
```bash
python -c "
from data_preparation.load_data import HotelDataLoader
from models.text_similarity_model import TextBasedRecommender

loader = HotelDataLoader()
hotels = loader.load_hotels()

model = TextBasedRecommender()
model.fit(hotels)
print(f'‚úÖ Text-Modell trainiert f√ºr {len(hotels)} Hotels')

# Teste verschiedene Suchanfragen mit verschiedenen Budgets
test_cases = [
    ('relaxing in luxury hotel', 400),
    ('budget family hotel', 200), 
    ('business hotel with wifi', 300),
    ('romantic spa hotel', 500)
]

for query, budget in test_cases:
    print(f'\nüîç \"{query}\" | Budget: ‚Ç¨{budget}')
    user_prefs = {'max_price': budget}
    results = model.recommend_hotels(query, hotels, user_prefs, top_k=3)
    
    if len(results) > 0:
        for _, hotel in results.iterrows():
            print(f'  {hotel[\"name\"][:45]:45} | ‚Ç¨{hotel[\"price\"]:6.0f} | {hotel[\"rating\"]}/10‚≠ê')
    else:
        print('  ‚ùå Keine Hotels in dieser Preiskategorie gefunden')
"
```

**Erwarteter Output:**
```text
‚úÖ Text-Modell trainiert f√ºr 8072 Hotels

üîç "relaxing in luxury hotel" | Budget: ‚Ç¨400
  The Editory Riverside Hotel, an Historic Hotel | ‚Ç¨   258 | 8.4/10‚≠ê
  The New Yorker Hotel, a Lotte Hotel            | ‚Ç¨   346 | 7.7/10‚≠ê

üîç "business hotel with wifi" | Budget: ‚Ç¨300
  Abstract Hotel                                 | ‚Ç¨    93 | 8.2/10‚≠ê
  LyLo Auckland Hotel                            | ‚Ç¨   109 | 8.7/10‚≠ê
  Travelodge Hotel Auckland Wynyard Quarter      | ‚Ç¨   130 | 8.6/10‚≠ê

üîç "romantic spa hotel" | Budget: ‚Ç¨500
  Elite Palace Hotel & Spa                       | ‚Ç¨   249 | 8.2/10‚≠ê
  The Houghton Hotel, Spa, Wellness & Golf       | ‚Ç¨   342 | 9.0/10‚≠ê
```

**Wichtige Erkenntnisse:**
- ‚úÖ **Preisfilter funktionieren korrekt** - Unterschiedliche Budgets zeigen verschiedene Hotels
- ‚úÖ **Keine Duplikate** - Jedes Hotel erscheint nur einmal
- ‚úÖ **Relevante Treffer** - Hotels passen zur Suchanfrage ("spa" findet Spa-Hotels)
- ‚úÖ **Automatische Filterung** - System filtert erst nach Preis, dann nach Relevanz

### Test 5: Hybrid-Modell
```bash
python -c "
from data_preparation.load_data import HotelDataLoader
from data_preparation.feature_engineering import HotelFeatureEngineer
from models.hybrid_model import HybridRecommender

# Daten vorbereiten
loader = HotelDataLoader()
hotels = loader.load_hotels()
engineer = HotelFeatureEngineer()
features = engineer.engineer_numerical_features(hotels)

# Hybrid-Modell trainieren
model = HybridRecommender()
model.train(hotels, features)
print('‚úÖ Hybrid-Modell trainiert')

# Kombinierte Empfehlung testen
user_prefs = {
    'max_price': 400,
    'min_rating': 7.0,  # 7.0/10 entspricht "sehr gut"
    'text_importance': 0.6
}

query = 'Luxushotel mit Spa und Pool'
recommendations = model.recommend_hotels(query, hotels, features, user_prefs)

print(f'‚úÖ {len(recommendations)} Hybrid-Empfehlungen')
if len(recommendations) > 0:
    top = recommendations.iloc[0]
    print(f'üèÜ Top Hybrid-Empfehlung: {top[\"name\"]} (‚Ç¨{top[\"price\"]}, {top[\"rating\"]}/10‚≠ê)')
"
```

---

## üóÉÔ∏è Datenbank-Verifikation

### Datenbank-Status pr√ºfen
```bash
# Pr√ºfe ob Datenbank-Datei existiert
ls -la ../data_acquisition/database/travelhunters.db

# Zeige Datenbank-Tabellen
sqlite3 ../data_acquisition/database/travelhunters.db ".tables"

# Anzahl Hotels anzeigen
sqlite3 ../data_acquisition/database/travelhunters.db "SELECT COUNT(*) FROM booking_worldwide;"

# Beispiel-Hotels anzeigen
sqlite3 ../data_acquisition/database/travelhunters.db "SELECT name, price, rating FROM booking_worldwide LIMIT 5;"
```

**Erwarteter Output:**
```text
-rw-r--r--  1 user  staff  12345678 Jul  8 10:30 travelhunters.db
booking_worldwide
unique_cities
8072
Hotel Saint-Louis Marais|480.0|4.4
Renaissance Paris Arc de Triomphe Hotel|803.0|4.2
Hotel des Grands Boulevards|420.0|4.3
Lula Tulum, a Small Luxury Hotel|520.0|5.0
Elite Palace Hotel & Spa|165.0|4.5
```

---

## ‚ö†Ô∏è Fehlerbehebung

### Problem: "Database file not found"
```bash
# √úberpr√ºfe Datenbank-Pfad
ls -la ../data_acquisition/database/

# Falls Datenbank fehlt, nutzt das System automatisch JSON/Mock-Daten
# Erwartete Fallback-Meldung:
# "‚ùå Error loading from database: Database file not found"
# "‚úÖ Loading hotel data from: booking_worldwide.json"
```

### Problem: "No module named 'sklearn'"
```bash
# Installiere fehlende Python-Pakete
pip install scikit-learn pandas numpy

# Oder nutze requirements.txt
pip install -r requirements.txt
```

### Problem: "Empty recommendations"  
```bash
# Pr√ºfe Datenqualit√§t
python -c "
from data_preparation.load_data import HotelDataLoader
loader = HotelDataLoader()
summary = loader.get_data_summary()
print(f'Hotels: {summary[\"n_hotels\"]}')
print(f'Durchschnittliche Bewertung: {summary[\"avg_rating\"]:.2f}')
print(f'Preisbereich: ‚Ç¨{summary[\"price_range\"][\"min\"]:.0f} - ‚Ç¨{summary[\"price_range\"][\"max\"]:.0f}')
"
```

### Problem: Import-Fehler
```bash
# Pr√ºfe Python-Version (3.8+ empfohlen)
python --version

# Pr√ºfe ob alle Dateien vorhanden sind
ls -la models/*.py
ls -la data_preparation/*.py
```

---

## üìä Performance-Benchmarks

**Erwartete Systemleistung:**
- **Datenladen**: ~2-3 Sekunden f√ºr 8.000+ Hotels
- **Feature Engineering**: ~1-2 Sekunden f√ºr 30+ Features
- **Parameter Model Training**: ~0.1-1 Sekunden
- **Text Model Training**: ~1-2 Sekunden
- **Empfehlungsabfrage**: ~0.5-1 Sekunden
- **Speicherverbrauch**: ~200-300 MB

**ML-Evaluation-Metriken:**
- **Parameter Model R¬≤**: 0.8-1.0 (perfekte synthetische Daten)
- **Parameter Model RMSE**: 0.0-0.2 (auf 10-Punkte-Skala)
- **Text Model Cosine Similarity**: 0.5-0.9 f√ºr relevante Treffer
- **Prediction Accuracy (¬±0.5 Punkte)**: ~65-75% (auf 10-Punkte-Skala)

---

## üéõÔ∏è Systemanforderungen

### Software-Anforderungen
```bash
# Python Version (3.8+ empfohlen)
python --version

# Erforderliche Python-Pakete
pip install pandas numpy scikit-learn
```

### Hardware-Empfehlungen
- **RAM**: Mindestens 4 GB (8 GB empfohlen)
- **CPU**: Multi-Core empfohlen f√ºr Training
- **Speicher**: ~500 MB f√ºr Datenbank + Models

### Ben√∂tigte Dateien
- ‚úÖ `../data_acquisition/database/travelhunters.db` (Haupt-Datenquelle)
- ‚úÖ `requirements.txt` (Python-Abh√§ngigkeiten)
- ‚úÖ `demo.py` (Interaktive Hauptanwendung)
- ‚úÖ `test_complete_system.py` (Automatisierter Testsuite)
- ‚úÖ `models/*.py` (ML-Modell-Implementierungen)
- ‚úÖ `data_preparation/*.py` (Datenverarbeitung)

---

## üöÄ Produktionsbereitschaft

### Vollst√§ndiger Bereitstellungstest
```bash
# 1. F√ºhre kompletten automatisierten Test durch
python test_complete_system.py

# 2. Falls alle Tests bestehen (6-7/7), starte Demo
python demo.py

# 3. Teste alle Demo-Funktionen:
#    - Daten√ºbersicht anzeigen
#    - Empfehlungen f√ºr verschiedene Pr√§ferenzen abrufen  
#    - Modell-Performance √ºberpr√ºfen

# 4. System ist einsatzbereit! üéâ
```

### Erfolgs-Checkliste
- [ ] Automatisierte Tests bestehen (‚â•85% Erfolgsrate)
- [ ] Datenbank l√§dt korrekt (8.000+ Hotels) 
- [ ] Alle 3 ML-Modelle trainieren erfolgreich
- [ ] Demo-Interface startet ohne Fehler
- [ ] Empfehlungen werden generiert (<2 Sekunden)
- [ ] Performance-Metriken sind plausibel

---

## üìù Fazit

Mit dieser umfassenden Testanleitung kannst du das gesamte TravelHunters ML-Empfehlungssystem systematisch verifizieren. Das System ist darauf ausgelegt, robust zu funktionieren, auch wenn einzelne Komponenten (wie die Datenbank) fehlen - es greift automatisch auf Fallback-Datenquellen zur√ºck.

**Bei erfolgreichen Tests steht dir ein voll funktionsf√§higes ML-System zur Verf√ºgung, das:**
- Hotels aus einer echten Datenbank l√§dt
- Intelligente Empfehlungen basierend auf Benutzer-Pr√§ferenzen generiert
- Sowohl parameter-basierte als auch text-basierte Ans√§tze kombiniert
- Eine benutzerfreundliche Demo-Schnittstelle bietet
- Umfassende Evaluation und Debugging-Unterst√ºtzung includet

Viel Erfolg beim Testen! üöÄ
